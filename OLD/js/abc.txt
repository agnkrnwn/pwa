index.html

<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Generate label pengiriman pdf">
    <title>LABEL GENERATOR</title>

    <!-- PWA  -->
    <meta name="theme-color" content="#000000" />
    <link rel="apple-touch-icon" href="/images/icon/apple-icon-180.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="shortcut icon" href="/images/icon/image.svg">
    <link rel="stylesheet" href="/css/mobile.css" type="text/css" media="screen and (max-device-width: 600px)" defer>
    <link rel="stylesheet" href="/css/sweetalert2.min.css" defer>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
    <div class="container-fluid bg-light">
        <div class="container">
            <div class="row justify-content-center ">
                <div class="col">
                    <header>
                        <nav>
                            <button class="first float-start mt-3 me-7 btn btn-light info"><i class="fa fa-info"></i>
                                info</button>
                            <div class="form-check form-switch ms-auto mt-3 me-7 float-end">
                                <label class="form-check-label ms-0" for="lightSwitch">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor"
                                        class="bi bi-brightness-high" viewBox="0 0 16 16">
                                        <path
                                            d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z" />
                                    </svg>
                                </label>
                                <label for="lightSwitch" id="hide">dark mode</label>
                                <input class="form-check-input" type="checkbox" id="lightSwitch" />
                            </div>
                        </nav>
                        <div class="p-5 text-center bg-light">
                            <h1 class="mb-2">LABEL GENERATOR</h1>
                            <p class="mb-0">Use chrome for a better experience </p>
                        </div>
                    </header>
                    <form>
                        <div class="row mb-3">
                            <div class="col">
                                <select id="order" class="form-select">
                                    <option value="ORDER">ORDER</option>
                                    <option value="RETUR">RETUR</option>
                                    <option value="REFUND">REFUND</option>
                                    <option value="HADIAH">HADIAH</option>
                                </select>
                            </div>
                            <div class="col">
                                <select id="cash" class="form-select" onchange="fillInputField()">
                                    <option value="METODE">METODE</option>
                                    <option value="MANUAL">MANUAL</option>
                                    <option value="CASHLESS">CASHLESS</option>
                                    <option value="COD">COD</option>
                                    <option value="DFOD">DFOD</option>
                                </select>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col">
                                <input type="text" class="form-control" placeholder="RESI WAJIB" name="resi" id="resi"
                                    value="" required>
                            </div>
                            <div class="col">
                                <select id="expedisi" class="form-select">
                                    <option value="EXPEDISI">EXPEDISI</option>
                                    <option value="JNE REG">JNE REG</option>
                                    <option value="JNE OKE">JNE OKE</option>
                                    <option value="JNE YES">JNE YES</option>
                                    <option value="JNE JTR">JNE JTR</option>
                                    <option value="JNT">JNT</option>
                                    <option value="JNT DFOD">JNT DFOD</option>
                                    <option value="JNT ECO">JNT ECONOMY</option>
                                    <option value="JNT JMR">JNT JEMARI</option>
                                    <option value="LEL EXP">LEL EXPRESS</option>
                                    <option value="TIKI">TIKI</option>
                                    <option value="ID EXP">ID EXPRESS</option>
                                    <option value="ANTER AJA">ANTER AJA</option>
                                    <option value="NINJA">NINJA EXPRESS</option>
                                    <option value="WAHANA">WAHANA</option>
                                    <option value="SICEPAT REG">SICEPAT REG</option>
                                    <option value="SICEPAT HALU">SICEPAT HALU</option>
                                    <option value="SHOPEE STD">SHOPEE EXPRESS STD</option>
                                    <option value="SHOPEE INS">SHOPEE EXPRESS INS</option>
                                    <option value="GRAB INST">GRAB INSTANT</option>
                                    <option value="GRAB SAME">GRAB SAMEDAY</option>
                                    <option value="GOJEK INST">GOJEK INSTANT</option>
                                    <option value="GOJEK SAME">GOJEK SAMEDAY</option>
                                    <option value="CARGO">CARGO</option>
                                    <option class="editable" style="color: red;" value="">LAINYA</option>
                                </select>
                            </div>
                            <div class="form-group mb-3">
                                <input class="editOption mt-3 w-90 form-control alert alert-danger"
                                    style="display: none"
                                    placeholder="Tulis expedisi lain disini jangan kosong"></input>
                            </div>
                        </div>
                        <div class="form-group mb-3">
                            <label for="">Nomer Pesanan</label>
                            <input type="text" class="form-control" id="nopes" name="nopes"
                                placeholder="Isi bebas untukmu identifikasi">
                        </div>
                        <div class="row mb-3">
                            <div class="col">
                                <label for="">Pengirim</label>
                                <input type="text" class="form-control" id="pengirim"
                                    placeholder="Nama no telp pengirim" required>
                            </div>
                            <div class="col">
                                <label for="">Penerima</label>
                                <input type="text" class="form-control" id="penerima"
                                    placeholder="Nama no telp penerima" required>
                            </div>
                        </div>
                        <div class="mb-3 mt-3">
                            <label for="comment">Alamat:</label>
                            <textarea class="form-control" rows="5" id="alamat" name="addres"
                                placeholder="isi dengan alamat penerima lengkap rt/, gausah di kasi enter gpp udah format alamat otomatis"
                                required></textarea>
                        </div>
                        <div class="input-group mb-3">
                            <span class="input-group-text">Produk 1</span>
                            <input id="barang" type="text" class="form-control"
                                placeholder="isi nama produk dan jumlahnya">
                        </div>
                        <div class="input-group mb-3">
                            <span class="input-group-text">Produk 2</span>
                            <input id="barangdua" type="text" class="form-control"
                                placeholder="isi nama produk dan jumlahnya">
                        </div>
                        <div class="input-group mb-3">
                            <span class="input-group-text">Produk 3</span>
                            <input id="barangtiga" type="text" class="form-control"
                                placeholder="isi nama produk dan jumlahnya">
                        </div>
                        <div class="mb-3 text-center">
                            <button onclick="printPDF()" type="button" id="printpagebutton" name="printpagebutton"
                                class="btn btn-block border-light btn-dark "><i class="fa fa-print"></i> PRINT</button>
                            <button onclick="createPDF()" type="button" id="downloadlabel" name="downloadlabel"
                                class="btn btn-block border-light btn-dark "><i class="fa fa-download"></i>
                                DOWNLOAD</button>
                            <button type="reset" class="btn btn-block border-light btn-dark" value="Reset"><i
                                    class="fa">&#xf021;</i> RESET </button>
                        </div>
                        <div class="mb-3 row text-center">
                            <img style="display: none;" id="barcode" alt="barcode">
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('./sw.js')
            .then(function () {
                console.log('Service Worker Registered');
            });
    }
</script>
<script src="/js/jquery.min.js" defer type="text/javascript"></script>
<script src="/js/barcode2.js" defer type="text/javascript"></script>
<script src="/js/JsBarcode.all.min.js" defer type="text/javascript"></script>
<script src="/js/jspdf.min.js" defer type="text/javascript"></script>
<script src="/js/script.js" defer type="text/javascript"></script>
<script src="/js/darkmode.js" defer type="text/javascript"></script>
<script src="/js/sweetalert2.all.min.js" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

</html>


mobile.css

@media only screen and (max-width: 600px) {
    body {
      background-color: #f8f9fa;
    }
  }
    
  #lightSwitch {
    transform: scale(1.2);
  }

a {
  color: #1d4176;
  text-decoration: none;
}

#hide {
  display: none;
}

.info {
  font-size: 0.6em;
  font-weight: bold;
  margin-bottom: 0.5em;
}

barcode2.js


function rand_str_without_O0() {
  const list = "ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";
  var res = "";
  for(var i = 0; i < 10; i++) {
      var rnd = Math.floor(Math.random() * list.length);
      res = res + list.charAt(rnd);
  }
  return res;
}

function createPDF() {
  //YAAAA

  if (
    document.getElementById("order").value == "" &&
    document.getElementById("expedisi").value == "" &&
    document.getElementById("pengirim").value == "" &&
    document.getElementById("alamat").value == "" &&
    document.getElementById("barang").value == "" &&
    document.getElementById("resi").value == "" &&
    document.getElementById("barangtiga").value == "" &&
    document.getElementById("barangdua").value == "" &&
    document.getElementById("nopes").value == "" &&
    document.getElementById("penerima").value == "" &&
    document.getElementById("cash").value == ""
  ) {
    alert("isi kabeh broo");
  } else {
    var doc = new jsPDF("p", "pt", [283.464566929, 340.157480315]);

    //=============header========================
  

    doc.setFontSize(8);
    doc.text(document.getElementById("pengirim").value, 55, 160);
    //  doc.text(10, 55, 'penerima');


    var alamat = document.getElementById("alamat").value
    lines = doc.splitTextToSize(alamat, 250) //ini untuk panjang text
    doc.text(25, 210, lines)

    var penerima = document.getElementById("penerima").value
    lines = doc.splitTextToSize(penerima, 250) //ini untuk panjang text
    doc.text(25, 190, lines)





    
    doc.text(document.getElementById("barang").value, 20, 285);
    doc.text(document.getElementById("barangdua").value, 20, 300);
    doc.text(document.getElementById("barangtiga").value, 20, 315);
    var inv = document.getElementById("nopes").value;
    var invs = " " + inv;
    doc.text(230, 335, inv, null, "center");
  

    doc.setFontSize(8) .setFontType("bold");
    doc.text("Pengirim : ", 30, 160, null, null, "center");
    doc.text("Penerima :", 30, 175, null, null, "center");
    doc.text("Isi Produk :", 30, 270, null, null, "center");

   

    

    var today = new Date();
    var time =
      today.getHours() + ":" + today.getMinutes();
    var date =
      today.getDate() +
      "-" +
      (today.getMonth() + 1) +
      "-" +
      today.getFullYear();
    var dateTime = "" + time + " | " + date;
    //doc.text(205, 335, dateTime);
    var tang = today.getDate() +
      "" +
      (today.getMonth() + 1) +
      "" +
      today.getFullYear();



    doc.setFontSize(10);
    doc.setFontType("bold");
    doc.text(document.getElementById("order").value, 10, 20);
    doc.text(document.getElementById("expedisi").value, 135, 20, "center" );
    doc.text(document.getElementById("cash").value, 240, 20, "center");
    

    //==================kotak dua===============
    doc.setLineWidth(0.4);
    doc.rect(2, 1, 280, 337);
    doc.rect(4, 28, 133, 20); // kotak bawah header 1
    doc.rect(140, 28, 140, 20); // kotak bawah header 3
    //doc.text("Resi : ", 30, 42, null, null, "center");
    doc.text(document.getElementById("resi").value, 68, 42, 'center');
    
    var icsa = rand_str_without_O0();
    var noresi = (tang + icsa) 
    doc.text(210, 42, noresi, null, 'center');

    doc.line(2, 140, 337, 140); // garis isor duwure jam
    doc.line(2, 260, 337, 260); // garis isi produk
    doc.line(2, 325, 350, 325); // garis isi produk
    ///dotttttttttttt line 
    doc.setLineDash([1, 1.5, 1, 1.5, 1, 1.5]); //dot libe header 
    doc.line(2, 25, 337, 25); //this too
    doc.line(2, 52, 337, 52); //this too


    var ics = document.getElementById("resi").value;

    //BARCODEEEEEEEEEEEEEE
    JsBarcode("#barcode", "" + ics, {
      format: "CODE128",
      fontOptions: "bold",
      width: 3,
      displayValue: false
    });

    const img = document.querySelector("img#barcode");
    doc.addImage(img.src, "JPEG", 15, 55, 260, 80, "center");


    //doc.autoPrint();
    //doc.output("dataurlnewwindow");
    //doc
    // .output("dataurlnewwindow", { returnPromise: false })
    //  .then(alert("Udah Di Print??"));

    var namanya = ("Label-" + inv +"-"+ icsa + ".pdf");
    

    doc
      .save(namanya, {
        returnPromise: true,
      })
      .then(Swal.fire({
        title: "Label berhasil di download",
        text: "Silahkan cek folder download dengan nama file \n " + namanya ,
        icon: "success",
        button: "Siap!!",
      }));
  }
}





function printPDF() {
  //YAAAA

  if (
    document.getElementById("order").value == "" &&
    document.getElementById("expedisi").value == "" &&
    document.getElementById("pengirim").value == "" &&
    document.getElementById("alamat").value == "" &&
    document.getElementById("barang").value == "" &&
    document.getElementById("resi").value == "" &&
    document.getElementById("barangtiga").value == "" &&
    document.getElementById("barangdua").value == "" &&
    document.getElementById("nopes").value == "" &&
    document.getElementById("penerima").value == "" &&
    document.getElementById("cash").value == ""
  ) {
    alert("isi kabeh broo");
  } else {
    var doc = new jsPDF("p", "pt", [283.464566929, 340.157480315]);

    //=============header========================
  

    doc.setFontSize(8);
    doc.text(document.getElementById("pengirim").value, 55, 160);
    //  doc.text(10, 55, 'penerima');


    var alamat = document.getElementById("alamat").value
    lines = doc.splitTextToSize(alamat, 250) //ini untuk panjang text
    doc.text(25, 210, lines)

    var penerima = document.getElementById("penerima").value
    lines = doc.splitTextToSize(penerima, 250) //ini untuk panjang text
    doc.text(25, 190, lines)





    
    doc.text(document.getElementById("barang").value, 20, 285);
    doc.text(document.getElementById("barangdua").value, 20, 300);
    doc.text(document.getElementById("barangtiga").value, 20, 315);
    var inv = document.getElementById("nopes").value;
    var invs = " " + inv;
    doc.text(230, 335, inv, null, "center");
  

    doc.setFontSize(8) .setFontType("bold");
    doc.text("Pengirim : ", 30, 160, null, null, "center");
    doc.text("Penerima :", 30, 175, null, null, "center");
    doc.text("Isi Produk :", 30, 270, null, null, "center");

   

    

    var today = new Date();
    var time =
      today.getHours() + ":" + today.getMinutes();
    var date =
      today.getDate() +
      "-" +
      (today.getMonth() + 1) +
      "-" +
      today.getFullYear();
    var dateTime = "" + time + " | " + date;
    //doc.text(205, 335, dateTime);
    var tang = today.getDate() +
      "" +
      (today.getMonth() + 1) +
      "" +
      today.getFullYear();



    doc.setFontSize(10);
    doc.setFontType("bold");
    doc.text(document.getElementById("order").value, 10, 20);
    doc.text(document.getElementById("expedisi").value, 135, 20, "center" );
    doc.text(document.getElementById("cash").value, 240, 20, "center");
    

    //==================kotak dua===============
    doc.setLineWidth(0.4);
    doc.rect(2, 1, 280, 337);
    doc.rect(4, 28, 133, 20); // kotak bawah header 1
    doc.rect(140, 28, 140, 20); // kotak bawah header 3
    //doc.text("Resi : ", 30, 42, null, null, "center");
    doc.text(document.getElementById("resi").value, 68, 42, 'center');
    
    var icsa = rand_str_without_O0();
    var noresi = (tang + icsa) 
    doc.text(210, 42, noresi, null, 'center');

    doc.line(2, 140, 337, 140); // garis isor duwure jam
    doc.line(2, 260, 337, 260); // garis isi produk
    doc.line(2, 325, 350, 325); // garis isi produk
    ///dotttttttttttt line 
    doc.setLineDash([1, 1.5, 1, 1.5, 1, 1.5]); //dot libe header 
    doc.line(2, 25, 337, 25); //this too
    doc.line(2, 52, 337, 52); //this too


    var ics = document.getElementById("resi").value;

    //BARCODEEEEEEEEEEEEEE
    JsBarcode("#barcode", "" + ics, {
      format: "CODE128",
      fontOptions: "bold",
      width: 3,
      displayValue: false
    });

    const img = document.querySelector("img#barcode");
    doc.addImage(img.src, "JPEG", 15, 55, 260, 80, "center");

    doc.autoPrint();
    doc.output("dataurlnewwindow");
    //doc
    // .output("dataurlnewwindow", { returnPromise: false })
    //  .then(alert("Udah Di Print??"));

    // doc .save("Label-" + inv + ".pdf", { returnPromise: true })
    // .then(alert("Silahkan Cek Download Folder"));
  }
}
  
script.js

function fillInputField() {
  // ambil elemen input dan dropdown
  var input = document.getElementById("resi");
  var dropdown = document.getElementById("cash");
  
  // jika opsi "Isi Manual" dipilih, isi input field dengan "manual"
  if (dropdown.value == "METODE") {
    input.value = "MANUAL";
  } 
  // jika opsi "Satu" dipilih, isi input field dengan "satu"
  else if (dropdown.value == "MANUAL") {
    input.value = "MANUAL";
  }
  // jika opsi "Dua" dipilih, isi input field dengan "dua"
  else if (dropdown.value == "CASHLESS") {
    input.value = "";
  }
  // jika opsi "Tiga" dipilih, isi input field dengan "tiga"
  else if (dropdown.value == "COD") {
    input.value = "";
  }
  else {
    input.value = "";
  }
}

var initialText = $('.editable').val();
    $('.editOption').val(initialText);
  
    $('#expedisi').change(function () {
      var selected = $('option:selected', this).attr('class');
      var optionText = $('.editable').text();
  
      if (selected == "editable") {
        $('.editOption').show();
  
  
        $('.editOption').keyup(function () {
          var editText = $('.editOption').val();
          $('.editable').val(editText);
          $('.editable').html(editText);
        });
  
      } else {
        $('.editOption').hide();
      }
    });

    document.querySelector(".first").addEventListener('click', function(){
        Swal.fire({
            title: 'INFO',
            html: 'ini adalah web app untuk generate dan print label mengunakan teknologi PWA (Progressive Web Apps) ,jika browser anda suport maka akan muncul, <b>add LABEL GENERATOR to home screen </b> di bagian bawah seperti gambar di atas, klik aja itu untuk install web app ini, agar mudah aksesnya ga perlu pakai browser. <br> <b> kolom resi wajib diisi jika CASHLESS, COD , DFOD, agar bisa generate label, dan tombol print hanya bisa di pake jika tersambung dengan printer. </b>',
            imageUrl: '/images/add.png',
            imageHeight: 100,
            imageAlt: 'Add to Home Screen',
            confirmButtonColor: '#212529',
            footer: 'hanya suport kertas A6 standart label di semua marketplace'
            
          });
      });


